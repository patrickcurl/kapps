# This file is a golang template. Variable values come from the final set of
# variables applicable to the stack/profile/cluster/etc that you install this
# kapp into.

# since this isn't a Helm-based kapp, we have to track the version somewhere
# other than a `Chart.yaml` file. This lets us automatically tag our kapp repo
# in our CD pipeline.
version: 0.1.0

# Env vars to pass to this kapp. Values can come from variables.
env_vars:
  TEMPLATED_PATH: "{{ index .kapp.templates 0 }}"

templates:
  - source: k8s/rbac.tpl.yaml
    dest: k8s/_generated_rbac.yaml

# These will be passed as env vars as well as any explicitly declared
vars:
  service_account: tiller
  tiller_namespace: kube-system
  role: ClusterRole
  role_name: cluster-admin
  role_binding: ClusterRoleBinding

requires:
  - kubectl
  - helm
